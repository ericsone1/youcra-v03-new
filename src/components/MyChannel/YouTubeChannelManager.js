import React, { useState, useEffect } from 'react';
import { doc, setDoc, getDoc, deleteField, updateDoc } from 'firebase/firestore';
import { db } from '../../firebase';
import { extractChannelId, fetchYouTubeChannelInfo } from '../../services/videoService';
import { useAuth } from '../../contexts/AuthContext';

// Ïπ¥ÌÖåÍ≥†Î¶¨ Îç∞Ïù¥ÌÑ∞
const YOUTUBE_CATEGORIES = [
  { id: 'gaming', name: 'Í≤åÏûÑ', icon: 'üéÆ', color: 'bg-red-500', description: 'Í≤åÏûÑ ÌîåÎ†àÏù¥ Î∞è Î¶¨Î∑∞' },
  { id: 'entertainment', name: 'ÏóîÌÑ∞ÌÖåÏù∏Î®ºÌä∏', icon: 'üé≠', color: 'bg-purple-500', description: 'ÏòàÎä•, ÏΩîÎØ∏Îîî, Î≤ÑÎùºÏù¥Ïñ¥Ìã∞' },
  { id: 'music', name: 'ÏùåÏïÖ', icon: 'üéµ', color: 'bg-pink-500', description: 'ÏùåÏïÖ, Ïª§Î≤Ñ, ÏûëÍ≥°' },
  { id: 'education', name: 'ÍµêÏú°', icon: 'üìö', color: 'bg-blue-500', description: 'Í∞ïÏùò, ÌäúÌÜ†Î¶¨Ïñº, ÏÑ§Î™Ö' },
  { id: 'tech', name: 'Í∏∞Ïà†', icon: 'üíª', color: 'bg-gray-600', description: 'ÌîÑÎ°úÍ∑∏ÎûòÎ∞ç, IT, ÏÜåÌîÑÌä∏Ïõ®Ïñ¥' },
  { id: 'lifestyle', name: 'ÎùºÏù¥ÌîÑÏä§ÌÉÄÏùº', icon: '‚ú®', color: 'bg-green-500', description: 'ÏùºÏÉÅ, Î∏åÏù¥Î°úÍ∑∏, Îç∞ÏΩî' },
  { id: 'cooking', name: 'ÏöîÎ¶¨', icon: 'üë®‚Äçüç≥', color: 'bg-orange-500', description: 'Î†àÏãúÌîº, Ïø†ÌÇπ, ÎßõÏßë' },
  { id: 'travel', name: 'Ïó¨Ìñâ', icon: '‚úàÔ∏è', color: 'bg-sky-500', description: 'Ïó¨ÌñâÍ∏∞, Í¥ÄÍ¥ëÏßÄ, Î¨∏Ìôî' },
  { id: 'beauty', name: 'Î∑∞Ìã∞', icon: 'üíÑ', color: 'bg-rose-500', description: 'Î©îÏù¥ÌÅ¨ÏóÖ, Ïä§ÌÇ®ÏºÄÏñ¥, Ìå®ÏÖò' },
  { id: 'fitness', name: 'Ïö¥Îèô', icon: 'üí™', color: 'bg-red-600', description: 'Ìó¨Ïä§, ÌôàÌä∏, Îã§Ïù¥Ïñ¥Ìä∏' },
  { id: 'review', name: 'Î¶¨Î∑∞', icon: '‚≠ê', color: 'bg-yellow-500', description: 'Ï†úÌíàÎ¶¨Î∑∞, Ïñ∏Î∞ïÏã±, ÌèâÍ∞Ä' },
  { id: 'comedy', name: 'ÏΩîÎØ∏Îîî', icon: 'üòÇ', color: 'bg-amber-500', description: 'Í∞úÍ∑∏, Ïú†Î®∏, ÏõÉÍ∏¥ÏòÅÏÉÅ' },
  { id: 'news', name: 'Îâ¥Ïä§', icon: 'üì∞', color: 'bg-slate-600', description: 'ÏãúÏÇ¨, Ï†ïÏπò, ÏÇ¨Ìöå' },
  { id: 'animal', name: 'ÎèôÎ¨º', icon: 'üê∂', color: 'bg-emerald-500', description: 'Î∞òÎ†§ÎèôÎ¨º, ÎèôÎ¨ºÏõê, ÏïºÏÉùÎèôÎ¨º' },
  { id: 'kids', name: 'ÌÇ§Ï¶à', icon: 'üß∏', color: 'bg-indigo-500', description: 'Ïñ¥Î¶∞Ïù¥, ÍµêÏú°, ÎÜÄÏù¥' },
  { id: 'sports', name: 'Ïä§Ìè¨Ï∏†', icon: '‚öΩ', color: 'bg-teal-600', description: 'Ï∂ïÍµ¨, ÏïºÍµ¨, Ïò¨Î¶ºÌîΩ' },
  { id: 'science', name: 'Í≥ºÌïô', icon: 'üî¨', color: 'bg-cyan-600', description: 'Ïã§Ìóò, Ïó∞Íµ¨, Í≥ºÌïôÏÉÅÏãù' },
  { id: 'art', name: 'ÏòàÏà†', icon: 'üé®', color: 'bg-fuchsia-500', description: 'Í∑∏Î¶º, Ï°∞Í∞Å, Ï∞ΩÏûë' },
  { id: 'business', name: 'ÎπÑÏ¶àÎãàÏä§', icon: 'üíº', color: 'bg-stone-600', description: 'Í≤ΩÏ†ú, Ìà¨Ïûê, Ï∞ΩÏóÖ' },
  { id: 'other', name: 'Í∏∞ÌÉÄ', icon: 'üìù', color: 'bg-neutral-500', description: 'Í∏∞ÌÉÄ Ïû•Î•¥' }
];

const YouTubeChannelManager = () => {
  const { currentUser } = useAuth();
  const [channelData, setChannelData] = useState(null);
  const [newChannelUrl, setNewChannelUrl] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [message, setMessage] = useState('');
  const [isEditing, setIsEditing] = useState(false);
  const [showCategoryModal, setShowCategoryModal] = useState(false);
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [showManageDropdown, setShowManageDropdown] = useState(false);
  const [showDeleteModal, setShowDeleteModal] = useState(false);

  // ÎîîÎ≤ÑÍ∑∏ Î°úÍ∑∏ Ï∂îÍ∞Ä
  console.log('üé¨ YouTubeChannelManager Î†åÎçîÎßÅÎê®');
  console.log('ÌòÑÏû¨ Ïú†Ï†Ä:', currentUser?.uid);
  console.log('Ï±ÑÎÑê Îç∞Ïù¥ÌÑ∞:', channelData);

  useEffect(() => {
    loadChannelData();
  }, [currentUser]);

  const loadChannelData = async () => {
    if (!currentUser?.uid) return;
    
    try {
      const userDoc = await getDoc(doc(db, 'users', currentUser.uid));
      if (userDoc.exists() && userDoc.data().youtubeChannel) {
        const channelData = userDoc.data().youtubeChannel;
        setChannelData(channelData);
        
        if (channelData.category) {
          setSelectedCategory(channelData.category);
        }
        
        const lastSync = channelData.lastSyncAt;
        const now = new Date();
        const hoursSinceLastSync = lastSync ? 
          (now - new Date(lastSync.seconds ? lastSync.seconds * 1000 : lastSync)) / (1000 * 60 * 60) : 
          999;
        
        if (hoursSinceLastSync >= 24) {
          console.log('24ÏãúÍ∞Ñ Í≤ΩÍ≥ºÎ°ú ÏûêÎèô ÎèôÍ∏∞Ìôî ÏãúÏûë');
          autoSyncChannel(channelData);
        }
      }
    } catch (error) {
      console.error('Ï±ÑÎÑê Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïò§Î•ò:', error);
    }
  };

  const handleCategorySelect = async (category) => {
    if (!currentUser?.uid || !channelData) return;

    try {
      await setDoc(doc(db, 'users', currentUser.uid), {
        youtubeChannel: {
          ...channelData,
          category: category
        }
      }, { merge: true });

      setSelectedCategory(category);
      setChannelData(prev => ({ ...prev, category }));
      setShowCategoryModal(false);
      setMessage(`‚úÖ Ïπ¥ÌÖåÍ≥†Î¶¨Í∞Ä "${category.name}"Î°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§!`);
      
    } catch (error) {
      console.error('Ïπ¥ÌÖåÍ≥†Î¶¨ Ï†ÄÏû• Ïò§Î•ò:', error);
      setMessage(`Ïπ¥ÌÖåÍ≥†Î¶¨ Ï†ÄÏû• Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${error.message}`);
    }
  };

  const handleDeleteChannel = async () => {
    if (!currentUser?.uid) return;

    setIsLoading(true);
    setMessage('');

    try {
      await updateDoc(doc(db, 'users', currentUser.uid), {
        youtubeChannel: deleteField()
      });

      setChannelData(null);
      setSelectedCategory(null);
      setShowDeleteModal(false);
      setShowManageDropdown(false);
      setMessage('‚úÖ Ï±ÑÎÑêÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§!');
      
    } catch (error) {
      console.error('Ï±ÑÎÑê ÏÇ≠Ï†ú Ïò§Î•ò:', error);
      setMessage(`Ï±ÑÎÑê ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${error.message}`);
      setShowDeleteModal(false);
    } finally {
      setIsLoading(false);
    }
  };

  const autoSyncChannel = async (oldChannelData) => {
    try {
      const channelInfo = { type: 'channel', value: oldChannelData.channelId };
      const updatedDetails = await fetchYouTubeChannelInfo(channelInfo);
      
      await setDoc(doc(db, 'users', currentUser.uid), {
        youtubeChannel: updatedDetails
      }, { merge: true });

      setChannelData(updatedDetails);
      console.log('Ï±ÑÎÑê Ï†ïÎ≥¥ ÏûêÎèô ÎèôÍ∏∞Ìôî ÏôÑÎ£å');
      
    } catch (error) {
      console.error('ÏûêÎèô ÎèôÍ∏∞Ìôî Ïò§Î•ò:', error);
    }
  };

  const handleRegisterChannel = async () => {
    if (!newChannelUrl.trim()) {
      setMessage('YouTube Ï±ÑÎÑê URLÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
      return;
    }

    setIsLoading(true);
    setMessage('');

    try {
      console.log('üîç ÌôòÍ≤ΩÎ≥ÄÏàò ÌôïÏù∏:');
      console.log('- REACT_APP_YOUTUBE_API_KEY Ï°¥Ïû¨:', !!process.env.REACT_APP_YOUTUBE_API_KEY);
      
      const channelInfo = extractChannelId(newChannelUrl);
      if (!channelInfo) {
        setMessage('Ïò¨Î∞îÎ•∏ YouTube Ï±ÑÎÑê URLÏù¥ ÏïÑÎãôÎãàÎã§. Îã§Ïãú ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.');
        setIsLoading(false);
        return;
      }

      const channelDetails = await fetchYouTubeChannelInfo(channelInfo);
      
      await setDoc(doc(db, 'users', currentUser.uid), {
        youtubeChannel: channelDetails
      }, { merge: true });

      setChannelData(channelDetails);
      setIsEditing(false);
      setNewChannelUrl('');
      
      if (channelDetails.isMockData) {
        setMessage('Ï±ÑÎÑêÏù¥ Îì±Î°ùÎêòÏóàÏäµÎãàÎã§. (YouTube API ÌÇ§Í∞Ä ÏóÜÏñ¥ Í∏∞Î≥∏ Ï†ïÎ≥¥Îßå ÌëúÏãúÎê©ÎãàÎã§)');
      } else {
        setMessage('Ï±ÑÎÑêÏù¥ ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏäµÎãàÎã§!');
      }
      
    } catch (error) {
      console.error('Ï±ÑÎÑê Îì±Î°ù Ïò§Î•ò:', error);
      setMessage(`Ï±ÑÎÑê Îì±Î°ù Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${error.message}`);
    } finally {
      setIsLoading(false);
    }
  };

  const handleSyncChannel = async () => {
    if (!channelData || !currentUser?.uid) return;

    setIsLoading(true);
    setMessage('');

    try {
      const channelInfo = { type: 'channel', value: channelData.channelId };
      const updatedDetails = await fetchYouTubeChannelInfo(channelInfo);
      
      await setDoc(doc(db, 'users', currentUser.uid), {
        youtubeChannel: updatedDetails
      }, { merge: true });

      setChannelData(updatedDetails);
      setShowManageDropdown(false);
      
      if (updatedDetails.isMockData) {
        setMessage('‚úÖ ÏµúÏã† Ï†ïÎ≥¥Î°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§. (Í∏∞Î≥∏ Ï†ïÎ≥¥)');
      } else {
        setMessage('‚úÖ ÏµúÏã† Ï†ïÎ≥¥Î°ú ÏóÖÎç∞Ïù¥Ìä∏ÎêòÏóàÏäµÎãàÎã§!');
      }
      
    } catch (error) {
      console.error('Ï±ÑÎÑê ÎèôÍ∏∞Ìôî Ïò§Î•ò:', error);
      setMessage(`Ï±ÑÎÑê ÎèôÍ∏∞Ìôî Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${error.message}`);
    } finally {
      setIsLoading(false);
    }
  };

  const formatNumber = (num) => {
    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
    return num;
  };
  
  const formatLastSync = (lastSync) => {
    if (!lastSync) return 'N/A';
    const date = lastSync.toDate ? lastSync.toDate() : new Date(lastSync);
    const now = new Date();
    const diffSeconds = Math.floor((now - date) / 1000);
    if (diffSeconds < 60) return 'Î∞©Í∏à Ï†Ñ';
    const diffMinutes = Math.floor(diffSeconds / 60);
    if (diffMinutes < 60) return `${diffMinutes}Î∂Ñ Ï†Ñ`;
    const diffHours = Math.floor(diffMinutes / 60);
    if (diffHours < 24) return `${diffHours}ÏãúÍ∞Ñ Ï†Ñ`;
    const diffDays = Math.floor(diffHours / 24);
    return `${diffDays}Ïùº Ï†Ñ`;
  };

  return (
    <div className="bg-white rounded-lg shadow-md p-6 mb-6">
      <div className="flex items-center justify-between mb-4">
        <h3 className="text-lg font-bold text-gray-800 flex items-center">
          üé¨ YouTube Ï±ÑÎÑê Í¥ÄÎ¶¨
        </h3>
        {channelData && (
          <a
            href={`https://www.youtube.com/channel/${channelData.channelId}`}
            target="_blank"
            rel="noopener noreferrer"
            className="px-3 py-1 bg-red-500 text-white text-xs rounded font-bold hover:bg-red-600 transition shadow"
          >
            Ï±ÑÎÑê Î∞îÎ°úÍ∞ÄÍ∏∞
          </a>
        )}
      </div>

      {(!channelData || isEditing) && (
        <div className="mb-6">
          <div className="flex gap-2 mb-3">
            <input
              type="text"
              value={newChannelUrl}
              onChange={(e) => setNewChannelUrl(e.target.value)}
              placeholder="YouTube Ï±ÑÎÑê URL ÎòêÎäî @Ï±ÑÎÑêÎ™Ö"
              className="flex-1 px-3 py-3 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              disabled={isLoading}
            />
            <button
              onClick={handleRegisterChannel}
              disabled={isLoading}
              className="px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 text-sm font-medium"
            >
              {isLoading ? 'Ï≤òÎ¶¨Ï§ë...' : channelData ? 'ÏóÖÎç∞Ïù¥Ìä∏' : 'Îì±Î°ù'}
            </button>
          </div>
          
          {isEditing && (
            <button
              onClick={() => {
                setIsEditing(false);
                setNewChannelUrl('');
              }}
              className="text-gray-500 text-sm hover:text-gray-700"
            >
              Ï∑®ÏÜå
            </button>
          )}
        </div>
      )}

      {message && (
        <div
          className={`mb-4 p-3 rounded-lg text-center text-sm font-semibold flex items-center justify-center gap-2 border ${
            message.includes('Ïò§Î•ò')
              ? 'bg-red-50 text-red-600 border-red-200'
              : 'bg-green-50 text-green-600 border-green-200'
          }`}
        >
          <span>{message.includes('Ïò§Î•ò') ? '‚ùå' : '‚úÖ'}</span>
          <span>{message}</span>
        </div>
      )}

      {channelData && !isEditing && (
        <div className="space-y-4">
          <div className="relative p-3 bg-gray-50 rounded-lg">
            <div className="absolute top-2 right-2 text-xs text-gray-500">
              ÏóÖÎç∞Ïù¥Ìä∏: {formatLastSync(channelData.lastSyncAt)}
            </div>
            <div className="flex items-center gap-3 pr-20">
              <img
                src={channelData.channelThumbnail}
                alt="Ï±ÑÎÑê Ïç∏ÎÑ§Ïùº"
                className="w-12 h-12 rounded-full object-cover"
              />
              <div className="flex-1 min-w-0">
                <h4 className="font-bold text-gray-800 text-sm truncate">{channelData.channelTitle}</h4>
                {selectedCategory && (
                  <div className="mt-1">
                    <span className={`inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full text-white ${selectedCategory.color}`}>
                      <span>{selectedCategory.icon}</span>
                      <span>{selectedCategory.name}</span>
                    </span>
                  </div>
                )}
                <p className="text-xs text-gray-600 line-clamp-1 mt-1">
                  {channelData.channelDescription || 'ÏÑ§Î™ÖÏù¥ ÏóÜÏäµÎãàÎã§.'}
                </p>
              </div>
            </div>
            <div className="flex justify-end gap-2 mt-3">
              <button
                onClick={handleSyncChannel}
                disabled={isLoading}
                className="px-3 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50"
              >
                üîÑ ÎèôÍ∏∞Ìôî
              </button>
              <button
                onClick={() => setShowCategoryModal(true)}
                className="px-3 py-2 text-sm bg-purple-500 text-white rounded-lg hover:bg-purple-600"
              >
                üè∑Ô∏è Ïπ¥ÌÖåÍ≥†Î¶¨
              </button>
              <div className="relative">
                <button
                  onClick={() => setShowManageDropdown(!showManageDropdown)}
                  className="px-3 py-2 text-sm bg-gray-500 text-white rounded-lg hover:bg-gray-600"
                >
                  ‚öôÔ∏è Í¥ÄÎ¶¨
                </button>
                {showManageDropdown && (
                  <div className="absolute right-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-10">
                    <button
                      onClick={() => {
                        setIsEditing(true);
                        setNewChannelUrl(channelData.originalUrl || '');
                        setShowManageDropdown(false);
                      }}
                      className="w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"
                    >
                      ‚úèÔ∏è Ï±ÑÎÑê ÏàòÏ†ï
                    </button>
                    <button
                      onClick={() => {
                        setShowDeleteModal(true);
                        setShowManageDropdown(false);
                      }}
                      className="w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50"
                    >
                      üóëÔ∏è Ï±ÑÎÑê ÏÇ≠Ï†ú
                    </button>
                  </div>
                )}
              </div>
            </div>
          </div>

          <div className="grid grid-cols-3 gap-2">
            <div className="text-center p-2 bg-red-50 rounded-lg">
              <div className="text-sm font-bold text-red-600">
                {formatNumber(channelData.subscriberCount)}
              </div>
              <div className="text-xs text-gray-600">Íµ¨ÎèÖÏûê</div>
            </div>
            <div className="text-center p-2 bg-blue-50 rounded-lg">
              <div className="text-sm font-bold text-blue-600">
                {formatNumber(channelData.videoCount)}
              </div>
              <div className="text-xs text-gray-600">ÏòÅÏÉÅ Ïàò</div>
            </div>
            <div className="text-center p-2 bg-green-50 rounded-lg">
              <div className="text-sm font-bold text-green-600">
                {formatNumber(channelData.viewCount)}
              </div>
              <div className="text-xs text-gray-600">Ï¥ù Ï°∞ÌöåÏàò</div>
            </div>
          </div>
        </div>
      )}

      {showCategoryModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto">
            <div className="p-6">
              <div className="flex justify-between items-center mb-4">
                <h4 className="text-lg font-bold text-gray-800">Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù</h4>
                <button
                  onClick={() => setShowCategoryModal(false)}
                  className="text-gray-500 hover:text-gray-700 text-xl"
                >
                  √ó
                </button>
              </div>
              <div className="grid grid-cols-2 gap-3">
                {YOUTUBE_CATEGORIES.map((category) => (
                  <button
                    key={category.id}
                    onClick={() => handleCategorySelect(category)}
                    className={`p-4 rounded-lg border-2 transition-all hover:scale-105 ${
                      selectedCategory?.id === category.id 
                        ? 'border-purple-500 bg-purple-50' 
                        : 'border-gray-200 hover:border-gray-300'
                    }`}
                  >
                    <div className="flex items-center gap-3 mb-2">
                      <span className={`w-10 h-10 rounded-lg flex items-center justify-center text-white text-lg ${category.color}`}>
                        {category.icon}
                      </span>
                      <div className="text-left">
                        <div className="font-bold text-gray-800">{category.name}</div>
                        <div className="text-xs text-gray-600">{category.description}</div>
                      </div>
                    </div>
                  </button>
                ))}
              </div>
            </div>
          </div>
        </div>
      )}

      {showDeleteModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-lg max-w-md w-full">
            <div className="p-6">
              <div className="flex items-center gap-3 mb-4">
                <div className="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                  <span className="text-red-600 text-xl">‚ö†Ô∏è</span>
                </div>
                <div>
                  <h4 className="text-lg font-bold text-gray-800">Ï±ÑÎÑê ÏÇ≠Ï†ú ÌôïÏù∏</h4>
                  <p className="text-sm text-gray-600">Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                </div>
              </div>
              <div className="mb-6 p-4 bg-gray-50 rounded-lg">
                <p className="text-sm text-gray-700">Îì±Î°ùÎêú YouTube Ï±ÑÎÑêÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?</p>
              </div>
              <div className="flex gap-3">
                <button
                  onClick={() => setShowDeleteModal(false)}
                  disabled={isLoading}
                  className="flex-1 px-4 py-2 text-sm bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"
                >
                  Ï∑®ÏÜå
                </button>
                <button
                  onClick={handleDeleteChannel}
                  disabled={isLoading}
                  className="flex-1 px-4 py-2 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600"
                >
                  {isLoading ? 'ÏÇ≠Ï†ú Ï§ë...' : 'ÏÇ≠Ï†ú'}
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {showManageDropdown && (
        <div
          className="fixed inset-0 z-5"
          onClick={() => setShowManageDropdown(false)}
        />
      )}
    </div>
  );
};

export default YouTubeChannelManager;